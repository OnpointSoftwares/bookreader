{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section -->
<section class="hero fade-in-up">
    <div class="hero-content">
        <h1>Discover Your Next<br>Great Read</h1>
        <p>Immerse yourself in thousands of carefully curated novels with our distraction-free reading experience designed for book lovers.</p>
        <div class="hero-actions">
            <a href="#featured-books" class="btn btn-primary hero-btn">Start Reading Free</a>
            <a href="#browse" class="btn btn-outline hero-btn">Browse Library</a>
        </div>
    </div>
</section>

<!-- Featured Books -->
<section id="featured-books" class="section-container">
    <div class="section-header">
        <h2 class="section-title">Featured Books</h2>
        <p class="section-subtitle">Discover our latest additions</p>
    </div>

    <div class="book-grid">
        {% for book in books %}
        <a href="{% url 'book_detail' slug=book.slug %}" class="book-card fade-in-up" style="animation-delay: 0.{{ forloop.counter }}s;">
            {% if book.cover_image %}
            <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-cover-img">
            {% else %}
            <div class="book-cover" style="background: linear-gradient(135deg, {% cycle '#4A90E2' '#E94E77' '#00B894' '#FDCB6E' %}, {% cycle '#6A5ACD' '#E84393' '#00CEC9' '#FF7675' %});">
                <div>{{ book.title|truncatewords:3|linebreaksbr }}</div>
            </div>
            {% endif %}
            <div class="book-title">{{ book.title }}</div>
            <div class="book-author">by {{ book.author }}</div>
            <div class="book-meta">
                <span>Added {{ book.created_at|timesince }} ago</span>
                {% if book.file %}
                <span>Available</span>
                {% else %}
                <span>Coming Soon</span>
                {% endif %}
            </div>
        </a>
        {% empty %}
        <div class="col-12 text-center py-5">
            <div class="alert alert-info">No books available yet. Check back soon!</div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- Categories -->
<section id="browse" class="py-5 bg-light">
    <div class="section-container">
        <div class="section-header">
            <h2 class="section-title">Browse by Category</h2>
            <p class="section-subtitle">Find your next read by category</p>
        </div>
        
        <div class="row g-4">
            <div class="col-6 col-md-3">
                <a href="#" class="category-card">
                    <i class="bi bi-book-half"></i>
                    <h3>Fiction</h3>
                    <p>Explore imaginary worlds</p>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a href="#" class="category-card">
                    <i class="bi bi-journal-text"></i>
                    <h3>Non-Fiction</h3>
                    <p>Learn something new</p>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a href="#" class="category-card">
                    <i class="bi bi-stars"></i>
                    <h3>Fantasy</h3>
                    <p>Magical adventures await</p>
                </a>
            </div>
            <div class="col-6 col-md-3">
                <a href="#" class="category-card">
                    <i class="bi bi-heart"></i>
                    <h3>Romance</h3>
                    <p>Stories of love</p>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Reading Mode -->
<div class="reading-mode" id="readingMode">
    <div class="reading-header">
        <div class="reading-controls">
            <button class="btn" onclick="closeReading()" style="padding: 0.5rem 1rem; margin-right: 1rem;">← Back</button>
            <div style="font-weight: 600; color: var(--primary-navy);" id="currentBook">{{ current_book.title }}</div>
        </div>
        
        <div class="reading-controls">
            <div class="progress-indicator">
                <div class="progress-current" id="readingProgress" style="width: {{ current_book.progress }}%;"></div>
            </div>
            <span style="margin-left: 1rem; color: var(--text-muted); font-size: 0.9rem;" id="progressText">{{ current_book.progress }}%</span>
        </div>
    </div>

    <div class="reading-content">
        <h1 class="chapter-title" id="chapterTitle">{{ current_book.chapter_title }}</h1>
        <h1 class="chapter-title" id="chapterTitle">Chapter 12: The Life of Maximum Boldness</h1>
        <div class="chapter-text" id="chapterContent">
            <p>Between life and death there is a library, and within that library, the shelves go on forever. Every book provides a chance to try another life you could have lived. To see how things would be if you had made other choices... Would you have done anything different, if you had the chance to undo your regrets?</p>
            
            <p>Nora Seed finds herself faced with this decision. Faced with the possibility of changing her life for a new one, following a different career, undoing old breakups, realizing her dreams of becoming a glaciologist; she must search within herself as she travels through the Midnight Library to decide what is truly fulfilling in life, and what makes it worth living in the first place.</p>
            
            <p>As she wandered through the vast corridors of books, each spine representing a different life she could have lived, Nora began to understand that the weight of regret she had carried for so long was perhaps not as heavy as she had believed. Each book whispered promises of what could have been, yet with each turn of a page, she discovered that perfection was not the absence of struggle, but rather the acceptance of it.</p>
            
            <p>The midnight hour stretched infinitely in this place between worlds, and with each story she experienced, Nora learned that the grass was not always greener in the parallel lives she might have led. Sometimes the rain fell just as hard, sometimes the heartbreak cut just as deep, and sometimes the dreams she thought would complete her left her feeling just as empty.</p>
            
            <p>But in this realization came a different kind of wisdom—one that spoke not of regret, but of possibility. Not of what was lost, but of what could still be found in the life she had left behind, waiting for her return like a book left open on a table, its story not yet finished.</p>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--soft-gray);">
            <button class="btn btn-outline" onclick="previousChapter()">← Previous Chapter</button>
            <span style="color: var(--text-muted);">Chapter 12 of 35</span>
            <button class="btn btn-primary" onclick="nextChapter()">Next Chapter →</button>
        </div>
    </div>
</div>
{% endblock %}